package com.viettel.etc.repositories.impl;import com.viettel.etc.dto.BookingInformationResultDTO;import com.viettel.etc.repositories.BookingInformationResultRepository;import com.viettel.etc.utils.Constants;import com.viettel.etc.xlibrary.core.entities.ResultSelectEntity;import com.viettel.etc.xlibrary.core.repositories.CommonDataBaseRepository;import org.springframework.stereotype.Repository;import java.util.HashMap;/** * Autogen class Repository Impl:  *  * @author ToolGen * @date Thu Aug 27 15:41:46 ICT 2020 */@Repositorypublic class BookingInformationResultRepositoryImpl extends CommonDataBaseRepository implements BookingInformationResultRepository{        /**     * api lay danh sach tu van tu xa     *      * @param itemParamsEntity: params client truyen len     * @return      */    @Override    public ResultSelectEntity getBookingInformationResult(BookingInformationResultDTO itemParamsEntity){         StringBuilder sql = new StringBuilder();         sql.append("select bir.result_id as resultId, bir.booking_id as bookingId, bir.contents, bir.file_name as fileName, bir.url, bir.digital_signatures as digitalSignature, bir.result_date as resultDate from booking_infomations_results bir left join (select booking_id from booking_informations where 1 = 1 and is_active = 1 and is_delete = 0 and patient_id = :patientId and booking_type = :bookingTypeAdvisory or booking_group = :bookingTypeChat) bi on bi.booking_id = bir.booking_id where bir.is_active = 1 and bir.is_delete = 0");         HashMap<String, Object> hmapParams = new HashMap<>();         hmapParams.put("patientId", itemParamsEntity.getPatientId());         hmapParams.put("bookingTypeAdvisory", Constants.BOOKING_ORDER_ADVISORY);         hmapParams.put("bookingTypeChat", Constants.BOOKING_ORDER_CHAT);         Integer start = null;         if(itemParamsEntity!=null && itemParamsEntity.getStartrecord()!=null){             start = itemParamsEntity.getStartrecord();         }         Integer pageSize = null;         if(itemParamsEntity!=null && itemParamsEntity.getPagesize()!=null){             pageSize = itemParamsEntity.getPagesize();         }         ResultSelectEntity resultData = getListDataAndCount(sql, hmapParams, start, pageSize,BookingInformationResultDTO.class);         return resultData;    }}